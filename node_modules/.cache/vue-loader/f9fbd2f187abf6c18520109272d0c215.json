{"remainingRequest":"/Users/chao/Desktop/GPS-vue1/GPS-VR/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chao/Desktop/GPS-vue1/GPS-VR/src/components/Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chao/Desktop/GPS-vue1/GPS-VR/src/components/Map.vue","mtime":1668075888439},{"path":"/Users/chao/Desktop/GPS-vue1/GPS-VR/node_modules/cache-loader/dist/cjs.js","mtime":1668141352967},{"path":"/Users/chao/Desktop/GPS-vue1/GPS-VR/node_modules/babel-loader/lib/index.js","mtime":1668141353020},{"path":"/Users/chao/Desktop/GPS-vue1/GPS-VR/node_modules/cache-loader/dist/cjs.js","mtime":1668141352967},{"path":"/Users/chao/Desktop/GPS-vue1/GPS-VR/node_modules/vue-loader/lib/index.js","mtime":1668141351619}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n\nimport styleJson1 from '../custom_map_config.json'\nexport default {\n\t\n\tname: 'Gps1',\n\tprops: {\n\t\ttitle: String\n\t},\n\tdata() {\n\t\treturn{\n\t\t\tlat:0,\n\t\t\tlon:0,\n\t\t}\n\t},\n\tbeforeMount() {\n\t\t\n\t\n\t},\n\tmounted() {\n\t\t//默认城市\n\t\tvar map = new BMapGL.Map('map',{\n\t\t\t\t\t\t\t\tshowControls: true,\n\t\t\t\t\t\t\t\t// enableIconClick: true,\n\t\t\t\t\t\t\t\t}); // 创建Map实例,添加室内图控件\n\t\t//var map = new BMap.Map(\"container\");   // 创建Map实例\n\t\tvar point = new BMapGL.Point(116.514, 39.915); // 创建点坐标\n\t\t// map.centerAndZoom(point, 16); // 初始化地图,设置中心点坐标和地图级别\n\t\t// map.enableScrollWheelZoom(true);\n\t\tvar convertor = new BMapGL.Convertor();\n\t\t\n\t\tvar geolocation = new BMapGL.Geolocation();\n\t\t    // 开启SDK辅助定位\n\t\tgeolocation.enableSDKLocation();\n\t\tgeolocation.getCurrentPosition(function(r){\n\t\t\tif(this.getStatus() == BMAP_STATUS_SUCCESS){\n\t\t\t\tmap.centerAndZoom(r.point, 16); // 初始化地图,设置中心点坐标和地图级别\n\t\t\t\tmap.enableScrollWheelZoom(true);\n\t\t\t\tvar mk = new BMapGL.Marker(r.point);\n\t\t\t\tmap.addOverlay(mk);\n\t\t\t\tmap.panTo(r.point);\n\t\t\t\talert('您的位置：' + r.point.lng + ',' + r.point.lat);\n\t\t\t}\n\t\t\telse {\n\t\t\t\talert('failed' + this.getStatus());\n\t\t\t}        \n\t\t});\n\t\t// 创建定位控件\n\t\tvar locationControl = new BMapGL.LocationControl({\n\t\t\t// 控件的停靠位置（可选，默认左上角）\n\t\t\tanchor: BMAP_ANCHOR_TOP_RIGHT,\n\t\t\t// 控件基于停靠位置的偏移量（可选）\n\t\t\toffset: new BMapGL.Size(20, 20)\n\t\t});\n\t\t// 将控件添加到地图上\n\t\tmap.addControl(locationControl);\n\n\t\t// 添加定位事件\n\t\tlocationControl.addEventListener(\"locationSuccess\", function(e){\n\t\t\tvar address = '';\n\t\t\taddress += e.addressComponent.province;\n\t\t\taddress += e.addressComponent.city;\n\t\t\taddress += e.addressComponent.district;\n\t\t\taddress += e.addressComponent.street;\n\t\t\taddress += e.addressComponent.streetNumber;\n\t\t\talert(\"当前定位地址为：\" + address);\n\t\t});\n\t\tlocationControl.addEventListener(\"locationError\",function(e){\n\t\t\talert(e.message);\n\t\t});\n\t\t\n\t\t\t\n\t\t\n\t\t// if (navigator.geolocation) {\n\t\t//     navigator.geolocation.getCurrentPosition(function (position) {\n\t\t//         var lat = position.coords.latitude;\n\t\t//         var lon = position.coords.longitude;\n\t\t//         console.log(lat,lon);\n\t\t// \t\tvar map = new BMapGL.Map('map',{\n\t\t// \t\t\t\t\t\t\t\tshowControls: true,\n\t\t// \t\t\t\t\t\t\t\tenableIconClick: true}); // 创建Map实例,添加室内图控件\n\t\t//         //var map = new BMap.Map(\"container\");   // 创建Map实例\n\t\t//         var point = new BMapGL.Point(lon, lat); // 创建点坐标\n\t\t//         var convertor = new BMapGL.Convertor();\n\n\t\t//         var gc = new BMapGL.Geocoder();\n\t\t//         var pointArr = [];\n\t\t//         pointArr.push(point);\n\t\t//         convertor.translate(pointArr, 1, 5, function(data){\n\t\t//           console.log(data);\n\t\t//           if(data.status === 0){\n\t\t// \t\t\t  var point_new = new BMapGL.Point(data.points[0].lng,data.points[0].lat); // 创建点坐标\n\t\t// \t\t\t  map.centerAndZoom(point_new, 16); // 初始化地图,设置中心点坐标和地图级别\n\t\t// \t\t\t  map.enableScrollWheelZoom(true);\n\t\t// \t\t\t  // map.setMapStyleV2({styleJson: styleJson1});\n\t\t// \t\t\t  // 隐藏室内图\n\t\t// \t\t\t  // map.setDisplayOptions({\n\t\t// \t\t\t  //     indoor: true\n\t\t// \t\t\t  // });\n\t\t// \t\t\t  // var marker1 = new BMapGL.Marker(point_new);\n\t\t// \t\t\t  // map.addOverlay(marker1);\n\t\t\t\t\t  \n\t\t\t\t\t\n\t\t\t\t\t  \n\t\t\t\t\t  \n\t\t//              gc.getLocation(data.points[0], function (rs) {\n\t\t//               var addComp = rs.addressComponents;\n\t\t//               var curCity = {\n\t\t//                   id: '',\n\t\t//                   city: `${addComp.city}`,\n\t\t//                   district:`${addComp.district}`,\n\t\t//                   street:`${addComp.street}`,\n\t\t//                   streetNumber:`${addComp.streetNumber}`,\n\t\t//                   province:`${addComp.province}`,\n\t\t//                   date: `${new Date()}`\n\t\t//               };\n\t\t//               //当前定位城市\n\t\t//               console.log(\"curCity0:\",curCity);\n\t\t              \n\t\t//               // $.cookie('VP_MOBILE_CURRENTCITY', JSON.stringify(curCity), { expires: 7, path: '/' });\n\t\t//               //alert(addComp.province + \", \" + addComp.city + \", \" + addComp.district + \", \" + addComp.street);\n\t\t//               // if (successFunc != undefined)\n\t\t//               //     successFunc(addComp);\n\t\t//               });\n\t\t//           }\n\t\t         \n\t\t//         })\n\t\t//     },\n\t\t//     function (error) {\n\t\t//         switch (error.code) {\n\t\t//             case 1:\n\t\t//                 alert(\"位置服务被拒绝。\");\n\t\t//                 break;\n\t\t//             case 2:\n\t\t//                 alert(\"暂时获取不到位置信息。\");\n\t\t//                 break;\n\t\t//             case 3:\n\t\t//                 alert(\"获取位置信息超时。\");\n\t\t//                 break;\n\t\t//             default:\n\t\t//                 alert(\"未知错误。\");\n\t\t//                 break;\n\t\t//         }\n\t\t//         var curCity = {\n\t\t//             id: '000001',\n\t\t//             name: '北京市',\n\t\t//             date: new Date()\n\t\t//         };\n\t\t//         //默认城市\n\t\t//          console.log(\"curCity1:\",curCity);\n\t\t\t\t\n\t\t//         // $.cookie('VP_MOBILE_DEFAULTCITY', JSON.stringify(curCity), { expires: 1, path: '/' });\n\t\t//         // if (errorFunc != undefined)\n\t\t//         //     errorFunc(error);\n\t\t//     }, { timeout: 5000, enableHighAccuracy: true });\n\t\t// } else {\n\t\t//     alert(\"你的浏览器不支持获取地理位置信息。\");\n\t\t//     // if (errorFunc != undefined)\n\t\t//     //     errorFunc(\"你的浏览器不支持获取地理位置信息。\");\n\t\t// }\n\t\t\t\n\t\t\n\t\t\n\n\t\t\n\t\t\n\t}\n\t\t\n}\n\n\n",{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;;AAEA","file":"Map.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id = \"map\"> \n    \n</div>\n</template>\n\n<script>\nimport styleJson1 from '../custom_map_config.json'\nexport default {\n\t\n\tname: 'Gps1',\n\tprops: {\n\t\ttitle: String\n\t},\n\tdata() {\n\t\treturn{\n\t\t\tlat:0,\n\t\t\tlon:0,\n\t\t}\n\t},\n\tbeforeMount() {\n\t\t\n\t\n\t},\n\tmounted() {\n\t\t//默认城市\n\t\tvar map = new BMapGL.Map('map',{\n\t\t\t\t\t\t\t\tshowControls: true,\n\t\t\t\t\t\t\t\t// enableIconClick: true,\n\t\t\t\t\t\t\t\t}); // 创建Map实例,添加室内图控件\n\t\t//var map = new BMap.Map(\"container\");   // 创建Map实例\n\t\tvar point = new BMapGL.Point(116.514, 39.915); // 创建点坐标\n\t\t// map.centerAndZoom(point, 16); // 初始化地图,设置中心点坐标和地图级别\n\t\t// map.enableScrollWheelZoom(true);\n\t\tvar convertor = new BMapGL.Convertor();\n\t\t\n\t\tvar geolocation = new BMapGL.Geolocation();\n\t\t    // 开启SDK辅助定位\n\t\tgeolocation.enableSDKLocation();\n\t\tgeolocation.getCurrentPosition(function(r){\n\t\t\tif(this.getStatus() == BMAP_STATUS_SUCCESS){\n\t\t\t\tmap.centerAndZoom(r.point, 16); // 初始化地图,设置中心点坐标和地图级别\n\t\t\t\tmap.enableScrollWheelZoom(true);\n\t\t\t\tvar mk = new BMapGL.Marker(r.point);\n\t\t\t\tmap.addOverlay(mk);\n\t\t\t\tmap.panTo(r.point);\n\t\t\t\talert('您的位置：' + r.point.lng + ',' + r.point.lat);\n\t\t\t}\n\t\t\telse {\n\t\t\t\talert('failed' + this.getStatus());\n\t\t\t}        \n\t\t});\n\t\t// 创建定位控件\n\t\tvar locationControl = new BMapGL.LocationControl({\n\t\t\t// 控件的停靠位置（可选，默认左上角）\n\t\t\tanchor: BMAP_ANCHOR_TOP_RIGHT,\n\t\t\t// 控件基于停靠位置的偏移量（可选）\n\t\t\toffset: new BMapGL.Size(20, 20)\n\t\t});\n\t\t// 将控件添加到地图上\n\t\tmap.addControl(locationControl);\n\n\t\t// 添加定位事件\n\t\tlocationControl.addEventListener(\"locationSuccess\", function(e){\n\t\t\tvar address = '';\n\t\t\taddress += e.addressComponent.province;\n\t\t\taddress += e.addressComponent.city;\n\t\t\taddress += e.addressComponent.district;\n\t\t\taddress += e.addressComponent.street;\n\t\t\taddress += e.addressComponent.streetNumber;\n\t\t\talert(\"当前定位地址为：\" + address);\n\t\t});\n\t\tlocationControl.addEventListener(\"locationError\",function(e){\n\t\t\talert(e.message);\n\t\t});\n\t\t\n\t\t\t\n\t\t\n\t\t// if (navigator.geolocation) {\n\t\t//     navigator.geolocation.getCurrentPosition(function (position) {\n\t\t//         var lat = position.coords.latitude;\n\t\t//         var lon = position.coords.longitude;\n\t\t//         console.log(lat,lon);\n\t\t// \t\tvar map = new BMapGL.Map('map',{\n\t\t// \t\t\t\t\t\t\t\tshowControls: true,\n\t\t// \t\t\t\t\t\t\t\tenableIconClick: true}); // 创建Map实例,添加室内图控件\n\t\t//         //var map = new BMap.Map(\"container\");   // 创建Map实例\n\t\t//         var point = new BMapGL.Point(lon, lat); // 创建点坐标\n\t\t//         var convertor = new BMapGL.Convertor();\n\n\t\t//         var gc = new BMapGL.Geocoder();\n\t\t//         var pointArr = [];\n\t\t//         pointArr.push(point);\n\t\t//         convertor.translate(pointArr, 1, 5, function(data){\n\t\t//           console.log(data);\n\t\t//           if(data.status === 0){\n\t\t// \t\t\t  var point_new = new BMapGL.Point(data.points[0].lng,data.points[0].lat); // 创建点坐标\n\t\t// \t\t\t  map.centerAndZoom(point_new, 16); // 初始化地图,设置中心点坐标和地图级别\n\t\t// \t\t\t  map.enableScrollWheelZoom(true);\n\t\t// \t\t\t  // map.setMapStyleV2({styleJson: styleJson1});\n\t\t// \t\t\t  // 隐藏室内图\n\t\t// \t\t\t  // map.setDisplayOptions({\n\t\t// \t\t\t  //     indoor: true\n\t\t// \t\t\t  // });\n\t\t// \t\t\t  // var marker1 = new BMapGL.Marker(point_new);\n\t\t// \t\t\t  // map.addOverlay(marker1);\n\t\t\t\t\t  \n\t\t\t\t\t\n\t\t\t\t\t  \n\t\t\t\t\t  \n\t\t//              gc.getLocation(data.points[0], function (rs) {\n\t\t//               var addComp = rs.addressComponents;\n\t\t//               var curCity = {\n\t\t//                   id: '',\n\t\t//                   city: `${addComp.city}`,\n\t\t//                   district:`${addComp.district}`,\n\t\t//                   street:`${addComp.street}`,\n\t\t//                   streetNumber:`${addComp.streetNumber}`,\n\t\t//                   province:`${addComp.province}`,\n\t\t//                   date: `${new Date()}`\n\t\t//               };\n\t\t//               //当前定位城市\n\t\t//               console.log(\"curCity0:\",curCity);\n\t\t              \n\t\t//               // $.cookie('VP_MOBILE_CURRENTCITY', JSON.stringify(curCity), { expires: 7, path: '/' });\n\t\t//               //alert(addComp.province + \", \" + addComp.city + \", \" + addComp.district + \", \" + addComp.street);\n\t\t//               // if (successFunc != undefined)\n\t\t//               //     successFunc(addComp);\n\t\t//               });\n\t\t//           }\n\t\t         \n\t\t//         })\n\t\t//     },\n\t\t//     function (error) {\n\t\t//         switch (error.code) {\n\t\t//             case 1:\n\t\t//                 alert(\"位置服务被拒绝。\");\n\t\t//                 break;\n\t\t//             case 2:\n\t\t//                 alert(\"暂时获取不到位置信息。\");\n\t\t//                 break;\n\t\t//             case 3:\n\t\t//                 alert(\"获取位置信息超时。\");\n\t\t//                 break;\n\t\t//             default:\n\t\t//                 alert(\"未知错误。\");\n\t\t//                 break;\n\t\t//         }\n\t\t//         var curCity = {\n\t\t//             id: '000001',\n\t\t//             name: '北京市',\n\t\t//             date: new Date()\n\t\t//         };\n\t\t//         //默认城市\n\t\t//          console.log(\"curCity1:\",curCity);\n\t\t\t\t\n\t\t//         // $.cookie('VP_MOBILE_DEFAULTCITY', JSON.stringify(curCity), { expires: 1, path: '/' });\n\t\t//         // if (errorFunc != undefined)\n\t\t//         //     errorFunc(error);\n\t\t//     }, { timeout: 5000, enableHighAccuracy: true });\n\t\t// } else {\n\t\t//     alert(\"你的浏览器不支持获取地理位置信息。\");\n\t\t//     // if (errorFunc != undefined)\n\t\t//     //     errorFunc(\"你的浏览器不支持获取地理位置信息。\");\n\t\t// }\n\t\t\t\n\t\t\n\t\t\n\n\t\t\n\t\t\n\t}\n\t\t\n}\n\n\n</script>\n\n<style scoped>\n\t#map{\n\t\tposition: relative;\n\t\twidth: 100%!important;\n\t\theight: 100%!important;\n\t/* \taspect-ratio: 3072/4096; */\n\t\tdisplay: block;\n\t\t/* top:1em; */\n\t}\n\n</style>\n"]}]}